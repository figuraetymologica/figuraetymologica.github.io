import{r as l,R as st,j as d,y as it,n as ut}from"./chunk-CihGx68D.js";function lt(){return new Promise(e=>{setTimeout(e,100),requestAnimationFrame(()=>{setTimeout(e,0)})})}var ct={grad:.9,turn:360,rad:360/(2*Math.PI)},f=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},i=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=Math.pow(10,t)),Math.round(r*e)/r+0},c=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=1),e>r?r:e>t?e:t},K=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},H=function(e){return{r:c(e.r,0,255),g:c(e.g,0,255),b:c(e.b,0,255),a:c(e.a)}},P=function(e){return{r:i(e.r),g:i(e.g),b:i(e.b),a:i(e.a,3)}},dt=/^#([0-9a-f]{3,8})$/i,x=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},Q=function(e){var t=e.r,r=e.g,n=e.b,a=e.a,o=Math.max(t,r,n),s=o-Math.min(t,r,n),u=s?o===t?(r-n)/s:o===r?2+(n-t)/s:4+(t-r)/s:0;return{h:60*(u<0?u+6:u),s:o?s/o*100:0,v:o/255*100,a}},_=function(e){var t=e.h,r=e.s,n=e.v,a=e.a;t=t/360*6,r/=100,n/=100;var o=Math.floor(t),s=n*(1-r),u=n*(1-(t-o)*r),g=n*(1-(1-t+o)*r),p=o%6;return{r:255*[n,u,s,s,g,n][p],g:255*[g,n,n,u,s,s][p],b:255*[s,s,g,n,n,u][p],a}},L=function(e){return{h:K(e.h),s:c(e.s,0,100),l:c(e.l,0,100),a:c(e.a)}},T=function(e){return{h:i(e.h),s:i(e.s),l:i(e.l),a:i(e.a,3)}},V=function(e){return _((r=(t=e).s,{h:t.h,s:(r*=((n=t.l)<50?n:100-n)/100)>0?2*r/(n+r)*100:0,v:n+r,a:t.a}));var t,r,n},b=function(e){return{h:(t=Q(e)).h,s:(a=(200-(r=t.s))*(n=t.v)/100)>0&&a<200?r*n/100/(a<=100?a:200-a)*100:0,l:a/2,a:t.a};var t,r,n,a},ht=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,pt=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ft=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,gt=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,q={string:[[function(e){var t=dt.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?i(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?i(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=ft.exec(e)||gt.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:H({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=ht.exec(e)||pt.exec(e);if(!t)return null;var r,n,a=L({h:(r=t[1],n=t[2],n===void 0&&(n="deg"),Number(r)*(ct[n]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return V(a)},"hsl"]],object:[[function(e){var t=e.r,r=e.g,n=e.b,a=e.a,o=a===void 0?1:a;return f(t)&&f(r)&&f(n)?H({r:Number(t),g:Number(r),b:Number(n),a:Number(o)}):null},"rgb"],[function(e){var t=e.h,r=e.s,n=e.l,a=e.a,o=a===void 0?1:a;if(!f(t)||!f(r)||!f(n))return null;var s=L({h:Number(t),s:Number(r),l:Number(n),a:Number(o)});return V(s)},"hsl"],[function(e){var t=e.h,r=e.s,n=e.v,a=e.a,o=a===void 0?1:a;if(!f(t)||!f(r)||!f(n))return null;var s=function(u){return{h:K(u.h),s:c(u.s,0,100),v:c(u.v,0,100),a:c(u.a)}}({h:Number(t),s:Number(r),v:Number(n),a:Number(o)});return _(s)},"hsv"]]},B=function(e,t){for(var r=0;r<t.length;r++){var n=t[r][0](e);if(n)return[n,t[r][1]]}return[null,void 0]},vt=function(e){return typeof e=="string"?B(e.trim(),q.string):typeof e=="object"&&e!==null?B(e,q.object):[null,void 0]},C=function(e,t){var r=b(e);return{h:r.h,s:c(r.s+100*t,0,100),l:r.l,a:r.a}},I=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},F=function(e,t){var r=b(e);return{h:r.h,s:r.s,l:c(r.l+100*t,0,100),a:r.a}},O=function(){function e(t){this.parsed=vt(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return i(I(this.rgba),2)},e.prototype.isDark=function(){return I(this.rgba)<.5},e.prototype.isLight=function(){return I(this.rgba)>=.5},e.prototype.toHex=function(){return t=P(this.rgba),r=t.r,n=t.g,a=t.b,s=(o=t.a)<1?x(i(255*o)):"","#"+x(r)+x(n)+x(a)+s;var t,r,n,a,o,s},e.prototype.toRgb=function(){return P(this.rgba)},e.prototype.toRgbString=function(){return t=P(this.rgba),r=t.r,n=t.g,a=t.b,(o=t.a)<1?"rgba("+r+", "+n+", "+a+", "+o+")":"rgb("+r+", "+n+", "+a+")";var t,r,n,a,o},e.prototype.toHsl=function(){return T(b(this.rgba))},e.prototype.toHslString=function(){return t=T(b(this.rgba)),r=t.h,n=t.s,a=t.l,(o=t.a)<1?"hsla("+r+", "+n+"%, "+a+"%, "+o+")":"hsl("+r+", "+n+"%, "+a+"%)";var t,r,n,a,o},e.prototype.toHsv=function(){return t=Q(this.rgba),{h:i(t.h),s:i(t.s),v:i(t.v),a:i(t.a,3)};var t},e.prototype.invert=function(){return h({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},e.prototype.saturate=function(t){return t===void 0&&(t=.1),h(C(this.rgba,t))},e.prototype.desaturate=function(t){return t===void 0&&(t=.1),h(C(this.rgba,-t))},e.prototype.grayscale=function(){return h(C(this.rgba,-1))},e.prototype.lighten=function(t){return t===void 0&&(t=.1),h(F(this.rgba,t))},e.prototype.darken=function(t){return t===void 0&&(t=.1),h(F(this.rgba,-t))},e.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},e.prototype.alpha=function(t){return typeof t=="number"?h({r:(r=this.rgba).r,g:r.g,b:r.b,a:t}):i(this.rgba.a,3);var r},e.prototype.hue=function(t){var r=b(this.rgba);return typeof t=="number"?h({h:t,s:r.s,l:r.l,a:r.a}):i(r.h)},e.prototype.isEqual=function(t){return this.toHex()===h(t).toHex()},e}(),h=function(e){return e instanceof O?e:new O(e)};const mt=e=>{const t="ontouchstart"in window;(window.matchMedia("(max-width: 1024px)").matches||t)&&e.requestFullscreen()},A=l.createContext({onInitPlayer:()=>{},status:"initial"}),bt=e=>{if(e.url===void 0)return;let t;try{const a=new URL(e.url);t=new URL(Y),t.pathname=`/video${a.pathname}`}catch{}if(t===void 0)return;const r={showPortrait:"portrait",showByline:"byline",showTitle:"title",controlsColor:"color",showControls:"controls",interactiveParams:"interactive_params",backgroundMode:"background",doNotTrack:"dnt"};let n;for(n in e){const a=e[n];if(n==="url"||a===void 0)continue;const o=r[n]??n;t.searchParams.append(o,a.toString())}if(t.searchParams.set("autoplay","true"),typeof e.controlsColor=="string"){const a=h(e.controlsColor).toHex().replace("#","");t.searchParams.set("color",a)}return e.showPortrait&&t.searchParams.set("title","true"),e.showByline&&(t.searchParams.set("portrait","true"),t.searchParams.set("title","true")),t.toString()},R=e=>{const t=document.createElement("link");t.rel="preconnect",t.href=e,t.crossOrigin="true",document.head.appendChild(t)};let z=!1;const yt="https://f.vimeocdn.com",Y="https://player.vimeo.com",D="https://i.vimeocdn.com",wt=()=>{z||window.matchMedia("(hover: none)").matches||(R(yt),R(Y),R(D),z=!0)},xt=e=>{try{const t=new URL(e).pathname.split("/")[2];return t===""||t==null?void 0:t}catch{}},At=async e=>{const t=`https://vimeo.com/api/v2/video/${xt(e)}.json`,r=(await(await fetch(t)).json())[0].thumbnail_large,n=r.substr(r.lastIndexOf("/")+1).split("_")[0],a=new URL(D);return a.pathname=`/video/${n}.webp`,a.searchParams.append("mw","1100"),a.searchParams.append("mh","619"),a.searchParams.append("q","70"),a},Nt=()=>d.jsx("div",{style:{display:"flex",width:"100%",height:"100%",alignItems:"center",justifyContent:"center",fontSize:"1.2em"},children:'Open the "Settings" panel and paste a video URL, e.g. https://vimeo.com/831343124.'}),Pt=({title:e,status:t,loading:r,videoUrl:n,previewImageUrl:a,autoplay:o,renderer:s,showPreview:u,playsinline:g,onStatusChange:p,onPreviewImageUrlChange:v})=>{const[y,N]=l.useState(0),m=l.useRef(null);if(l.useEffect(()=>{o&&s!=="canvas"&&t==="initial"&&p("loading")},[o,t,s,p]),l.useEffect(()=>{s!=="canvas"&&wt()},[s]),l.useEffect(()=>{if(n!==void 0){if(u===!1){v(void 0);return}a===void 0&&At(n).then(v).catch(()=>{console.error(`Could not load preview image for ${n}`)})}},[v,u,n,a]),!(s==="canvas"||t==="initial"))return d.jsx("iframe",{ref:m,title:e,src:n,loading:r,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture;",allowFullScreen:!0,style:{position:"absolute",width:"100%",height:"100%",opacity:y,transition:"opacity 1s",border:"none"},onLoad:()=>{p("ready"),N(1),m.current&&!g&&!o&&mt(m.current)}})},Ct=l.forwardRef(({url:e,loading:t="lazy",autoplay:r=!1,autopause:n=!0,showByline:a=!1,showControls:o=!0,doNotTrack:s=!1,keyboard:u=!0,loop:g=!1,muted:p=!1,pip:v=!1,playsinline:y=!1,showPortrait:N=!0,quality:m="auto",responsive:G=!0,speed:W=!1,showTitle:X=!1,transparent:Z=!0,showPreview:J=!1,autopip:tt,controlsColor:et,interactiveParams:rt,texttrack:nt,children:at,...j},w)=>{const[S,$]=l.useState("initial"),[U,ot]=l.useState(),{renderer:k}=l.useContext(st),M=bt({url:e,autoplay:r,autopause:n,showControls:o,controlsColor:et,doNotTrack:s,interactiveParams:rt,keyboard:u,loop:g,muted:p,pip:v,playsinline:y,quality:m,responsive:G,speed:W,texttrack:nt,showTitle:X,transparent:Z,showPortrait:N,autopip:tt});return d.jsx(A.Provider,{value:{status:S,previewImageUrl:U,onInitPlayer(){k!=="canvas"&&$("loading")}},children:d.jsx("div",{...j,ref:E=>{w!==null&&(typeof w=="function"?w(E):w.current=E)},children:M===void 0?d.jsx(Nt,{}):d.jsxs(d.Fragment,{children:[at,d.jsx(Pt,{title:j.title,autoplay:r,playsinline:y,videoUrl:M,previewImageUrl:U,loading:t,showPreview:J,renderer:k,status:S,onStatusChange:$,onPreviewImageUrlChange:ot})]})})})});Ct.displayName="Vimeo";const It="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkOAMAANIAzr59FiYAAAAASUVORK5CYII=",Rt=l.forwardRef(({src:e,...t},r)=>{const n=l.useContext(A);return d.jsx(it,{...t,src:String(n.previewImageUrl??e??It),ref:r})});Rt.displayName="VimeoPreviewImage";const jt=l.forwardRef((e,t)=>{const r=l.useContext(A),n=l.useCallback(async()=>{await lt(),r.onInitPlayer()},[r]);if(r.status==="initial")return d.jsx(ut,{...e,onClick:n,ref:t})});jt.displayName="VimeoPlayButton";const St=l.forwardRef((e,t)=>{if(l.useContext(A).status==="loading")return d.jsx("div",{...e,ref:t})});St.displayName="VimeoSpinner";export{jt as f,St as m,Ct as r,Rt as s};
